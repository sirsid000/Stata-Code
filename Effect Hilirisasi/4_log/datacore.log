----------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\siddi\Documents\Tesis\statatodo\4_log/datacore.log
  log type:  text
 opened on:  13 Jan 2024, 11:39:51

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. import excel "$raw/clean.xlsx", sheet("core") firstrow clear
(12 vars, 1,377 obs)

. bro

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. destring pdrb expcap pop govexp agri provid, replace
pdrb: all characters numeric; replaced as double
(90 missing values generated)
expcap: all characters numeric; replaced as double
(125 missing values generated)
pop: all characters numeric; replaced as long
(125 missing values generated)
govexp: all characters numeric; replaced as double
(113 missing values generated)
agri: all characters numeric; replaced as double
(209 missing values generated)
provid: all characters numeric; replaced as byte

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. merge m:1 provid tahun using "$raw/clean.xlsx", sheet("ihk") firstrow
option sheet() not allowed
r(198);

end of do-file

r(198);

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. import excel "$raw/clean.xlsx", sheet("ihk") firstrow clear
(17 vars, 102 obs)

. bro

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. keeporder provid tahun ihk

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. save "$dta/ihk.dta", replace //data ihk clear
(file C:\Users\siddi\Documents\Tesis\statatodo\2_dta/ihk.dta not found)
file C:\Users\siddi\Documents\Tesis\statatodo\2_dta/ihk.dta saved

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. import excel "$raw/clean.xlsx", sheet("core") firstrow clear
(12 vars, 1,377 obs)

. bro

. 
. destring pdrb expcap pop govexp agri provid, replace
pdrb: all characters numeric; replaced as double
(90 missing values generated)
expcap: all characters numeric; replaced as double
(125 missing values generated)
pop: all characters numeric; replaced as long
(125 missing values generated)
govexp: all characters numeric; replaced as double
(113 missing values generated)
agri: all characters numeric; replaced as double
(209 missing values generated)
provid: all characters numeric; replaced as byte

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. //gabung dengan ihk
. merge m:1 provid tahun using "$dta/ihk.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             1,377  (_merge==3)
    -----------------------------------------

. bro

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. *drop tahun
. drop if tahun >2016
(405 observations deleted)

. drop if tahun <2006
(81 observations deleted)

. bro

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. /*konversi*/
. 
. *pdrb miliar ke rupiah
. bys idkab tahun: gen pdrb1 = pdrb*10^9
(71 missing values generated)

. drop pdrb

. ren pdrb1 pdrb 

. 
. *govexp miliar ke rupiah
. bys idkab tahun: gen govexp1 = govexp*10^9
(94 missing values generated)

. drop govexp

. ren govexp1 govexp

. 
. *agri miliar ke rupiah
. bys idkab tahun: gen agri1 = agri*10^9
(128 missing values generated)

. drop agri

. ren agri1 agri

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. bys idkab tahun: gen expcap1 = (expcap/ihk)*100
(101 missing values generated)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. drop expcap

. ren expcap1 expcap

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. *belanja pemerintah
. bys idkab tahun: gen govexp1 = (govexp/ihk)*100
(94 missing values generated)

. drop govexp

. ren govexp1 govexp

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. *PDRB agri
. bys idkab tahun: gen agri1 = (agri/ihk)*100
(128 missing values generated)

. drop agri

. ren agri1 agri

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. /*konversi menjadi log natural*/
. *ln pdrb kapita"
. bys idkab tahun: gen lnpdrbcap = ln(pdrb/pop)
(101 missing values generated)

. label var lnpdrbcap "ln pdrb berlaku per kapita rupiah"

. hist lnpdrbcap, frequency normal
(bin=28, start=14.183853, width=.12569829)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. *ln pengeluaran rumah tangga kapita"
. bys idkab tahun: gen lnexpcap = ln(expcap*12)
(101 missing values generated)

. label var lnexpcap "ln pengeluaran rumah tangga setahun rupiah"

. hist lnexpcap, frequency normal
(bin=28, start=14.03182, width=.08653014)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. *ln govexp"
. bys idkab tahun: gen lngovexp = ln(govexp/pop)
(112 missing values generated)

. label var lngovexp "ln total pengeluaran pemerintah rupiah per kapita"

. hist lngovexp, frequency normal
(bin=27, start=12.294089, width=.12685108)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. *ln agri"
. bys idkab tahun: gen lnagri = ln(agri/pop)
(148 missing values generated)

. label var lnagri "ln pdrb berlaku sektor pertanian per kapita rupiah"

. hist lnagri, frequency normal
(bin=27, start=10.725058, width=.20444573)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. /*pembuatan dummy*/
.         
. *Membuat dummy after larangan nikel / after policy
. gen timeban = 0

. replace timeban = 1 if tahun >= 2014
(243 real changes made)

. tab timeban tahun

           |                                                     tahun
   timeban |      2006       2007       2008       2009       2010       2011       2012       2013       2014       2015 |     Total
-----------+--------------------------------------------------------------------------------------------------------------+----------
         0 |        81         81         81         81         81         81         81         81          0          0 |       648 
         1 |         0          0          0          0          0          0          0          0         81         81 |       243 
-----------+--------------------------------------------------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81         81         81         81         81 |       891 


           |   tahun
   timeban |      2016 |     Total
-----------+-----------+----------
         0 |         0 |       648 
         1 |        81 |       243 
-----------+-----------+----------
     Total |        81 |       891 

. lab var timeban "1 larangan berlaku"

.         
. *Membuat dummy treated, daerah memiliki tambang nikel
. gen aktnikel = 0

. replace aktnikel = 1 if tam >= 1
(100 real changes made)

. tab aktnikel  tahun

           |                                                     tahun
  aktnikel |      2006       2007       2008       2009       2010       2011       2012       2013       2014       2015 |     Total
-----------+--------------------------------------------------------------------------------------------------------------+----------
         0 |        81         80         79         74         71         69         69         67         67         67 |       791 
         1 |         0          1          2          7         10         12         12         14         14         14 |       100 
-----------+--------------------------------------------------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81         81         81         81         81 |       891 


           |   tahun
  aktnikel |      2016 |     Total
-----------+-----------+----------
         0 |        67 |       791 
         1 |        14 |       100 
-----------+-----------+----------
     Total |        81 |       891 

. lab var aktnikel  "1 daerah aktivitas nikel"

. 
. *membuat DiD larangan eksport
. gen didbanexp = timeban*aktnikel 

. lab var didbanexp "diff in diff larangan eksport"

. tab didbanexp tahun

   diff in |
      diff |
  larangan |                                                     tahun
   eksport |      2006       2007       2008       2009       2010       2011       2012       2013       2014       2015 |     Total
-----------+--------------------------------------------------------------------------------------------------------------+----------
         0 |        81         81         81         81         81         81         81         81         67         67 |       849 
         1 |         0          0          0          0          0          0          0          0         14         14 |        42 
-----------+--------------------------------------------------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81         81         81         81         81 |       891 


   diff in |
      diff |
  larangan |   tahun
   eksport |      2016 |     Total
-----------+-----------+----------
         0 |        67 |       849 
         1 |        14 |        42 
-----------+-----------+----------
     Total |        81 |       891 

. 
. /*variabel label*/
. 
. lab var idkab "id kabupaten/kota"

. lab var tahun "tahun observasi"

. lab var smel "jumlah smelter nikel beroperasi"

. lab var tam "jumlah tambang nikel beroperasi"

. 
. /*save data set*/
. 
. keeporder kabu idkab tahun lnpdrbcap lnexpcap aktnikel timeban didbanexp smel tam lngovexp lnagri

. bro

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. save "$dta/setbanexp.dta", replace //data DiD clear
file C:\Users\siddi\Documents\Tesis\statatodo\2_dta/setbanexp.dta saved

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. /*dataset smelter nikel*/
. 
. import excel "$raw/clean.xlsx", sheet("core") firstrow clear
(12 vars, 1,377 obs)

. bro

. 
. destring pdrb expcap pop govexp agri, replace
pdrb: all characters numeric; replaced as double
(90 missing values generated)
expcap: all characters numeric; replaced as double
(125 missing values generated)
pop: all characters numeric; replaced as long
(125 missing values generated)
govexp: all characters numeric; replaced as double
(113 missing values generated)
agri: all characters numeric; replaced as double
(209 missing values generated)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. destring pdrb expcap pop govexp agri provid, replace
pdrb already numeric; no replace
expcap already numeric; no replace
pop already numeric; no replace
govexp already numeric; no replace
agri already numeric; no replace
provid: all characters numeric; replaced as byte

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. //gabung dengan ihk
. merge m:1 provid tahun using "$dta/ihk.dta"

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             1,377  (_merge==3)
    -----------------------------------------

. bro

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. *drop tahun
. drop if tahun <2006
(81 observations deleted)

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. /*konversi ke nilai rupiah*/
. *pdrb miliar ke rupiah
. bys idkab tahun: gen pdrb1 = pdrb*10^9
(71 missing values generated)

. drop pdrb

. ren pdrb1 pdrb 

. 
. *govexp miliar ke rupiah
. bys idkab tahun: gen govexp1 = govexp*10^9
(94 missing values generated)

. drop govexp

. ren govexp1 govexp

. 
. *agri miliar ke rupiah
. bys idkab tahun: gen agri1 = agri*10^9
(128 missing values generated)

. drop agri

. ren agri1 agri

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. /*membuat jadi konstan*/
. *pengeluaran rt per kapita
. bys idkab tahun: gen expcap1 = (expcap/ihk)*100
(101 missing values generated)

. drop expcap

. ren expcap1 expcap

. 
. *belanja pemerintah
. bys idkab tahun: gen govexp1 = (govexp/ihk)*100
(94 missing values generated)

. drop govexp

. ren govexp1 govexp

. 
. *PDRB agri
. bys idkab tahun: gen agri1 = (agri/ihk)*100
(128 missing values generated)

. drop agri

. ren agri1 agri

. 
. /*konversi menjadi log natural*/
. *ln pdrb kapita"
. bys idkab tahun: gen lnpdrbcap = ln(pdrb/pop)
(101 missing values generated)

. label var lnpdrbcap "ln pdrb berlaku per kapita rupiah"

. hist lnpdrbcap, frequency normal
(bin=30, start=14.183853, width=.14211667)

. 
. *ln pengeluaran rumah tangga kapita"
. bys idkab tahun: gen lnexpcap = ln(expcap*12)
(101 missing values generated)

. label var lnexpcap "ln pengeluaran rumah tangga setahun rupiah"

. hist lnexpcap, frequency normal
(bin=30, start=14.03182, width=.09258486)

. 
. *ln govexp"
. bys idkab tahun: gen lngovexp = ln(govexp/pop)
(112 missing values generated)

. label var lngovexp "ln total pengeluaran pemerintah rupiah"

. hist lngovexp, frequency normal
(bin=30, start=12.294089, width=.11416597)

. 
. *ln agri"
. bys idkab tahun: gen lnagri = ln(agri/pop)
(148 missing values generated)

. label var lnagri "ln pdrb berlaku sektor pertanian per kapita rupiah"

. hist lnagri, frequency normal
(bin=30, start=10.725058, width=.18400116)

. 
. /*pembuatan dummy*/
. 
. *Membuat dummy pretend smelter nikel
. tab idkab tahun if smel>=1

           |                                                     tahun
     idkab |      2010       2011       2012       2013       2014       2015       2016       2017       2018       2019 |     Total
-----------+--------------------------------------------------------------------------------------------------------------+----------
      7203 |         0          0          1          1          1          1          1          1          1          1 |        10 
      7212 |         0          0          0          0          0          0          0          1          1          1 |         5 
      7303 |         0          0          0          0          0          0          0          0          0          1 |         3 
      7325 |         0          0          0          0          0          0          0          1          1          1 |         5 
      7403 |         0          0          0          0          0          0          0          0          0          0 |         1 
      7404 |         1          1          1          1          1          1          1          1          1          1 |        12 
      7408 |         0          0          0          0          0          0          0          0          0          0 |         1 
-----------+--------------------------------------------------------------------------------------------------------------+----------
     Total |         1          1          2          2          2          2          2          4          4          5 |        37 


           |         tahun
     idkab |      2020       2021 |     Total
-----------+----------------------+----------
      7203 |         1          1 |        10 
      7212 |         1          1 |         5 
      7303 |         1          1 |         3 
      7325 |         1          1 |         5 
      7403 |         0          1 |         1 
      7404 |         1          1 |        12 
      7408 |         0          1 |         1 
-----------+----------------------+----------
     Total |         5          7 |        37 

. 
. gen smelpretend = 0

. replace smelpretend = 1 if idkab == 7404 
(16 real changes made)

. replace smelpretend = 1 if idkab == 7203
(16 real changes made)

. replace smelpretend = 1 if idkab == 7212 
(16 real changes made)

. replace smelpretend = 1 if idkab == 7325 
(16 real changes made)

. replace smelpretend = 1 if idkab == 7303 
(16 real changes made)

. replace smelpretend = 1 if idkab == 7403 
(16 real changes made)

. replace smelpretend = 1 if idkab == 7408 
(16 real changes made)

. 
. lab var smelpretend "1 daerah smelter nikel pretend"

. 
. *Membuat dummy daerah memiliki smelter nikel
. gen didsmel = 0

. replace didsmel = 1 if smel >= 1
(37 real changes made)

. tab didsmel tahun

           |                                                     tahun
   didsmel |      2006       2007       2008       2009       2010       2011       2012       2013       2014       2015 |     Total
-----------+--------------------------------------------------------------------------------------------------------------+----------
         0 |        81         81         81         81         80         80         79         79         79         79 |     1,259 
         1 |         0          0          0          0          1          1          2          2          2          2 |        37 
-----------+--------------------------------------------------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81         81         81         81         81 |     1,296 


           |                               tahun
   didsmel |      2016       2017       2018       2019       2020       2021 |     Total
-----------+------------------------------------------------------------------+----------
         0 |        79         77         77         76         76         74 |     1,259 
         1 |         2          4          4          5          5          7 |        37 
-----------+------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81 |     1,296 

. lab var didsmel "1 daerah smelter nikel"

. 
. *Membuat dummy daerah non smelter nikel for spatial 
. gen nondsmel = 1

. replace nondsmel = 0 if smel < 1
(1,259 real changes made)

. tab nondsmel tahun 

           |                                                     tahun
  nondsmel |      2006       2007       2008       2009       2010       2011       2012       2013       2014       2015 |     Total
-----------+--------------------------------------------------------------------------------------------------------------+----------
         0 |        81         81         81         81         80         80         79         79         79         79 |     1,259 
         1 |         0          0          0          0          1          1          2          2          2          2 |        37 
-----------+--------------------------------------------------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81         81         81         81         81 |     1,296 


           |                               tahun
  nondsmel |      2016       2017       2018       2019       2020       2021 |     Total
-----------+------------------------------------------------------------------+----------
         0 |        79         77         77         76         76         74 |     1,259 
         1 |         2          4          4          5          5          7 |        37 
-----------+------------------------------------------------------------------+----------
     Total |        81         81         81         81         81         81 |     1,296 

. lab var nondsmel "1 daerah smelter tidak beroperasi"

. 
. /*variabel label*/
. 
. lab var idkab "id kabupaten/kota"

. lab var tahun "tahun observasi"

. lab var smel "jumlah smelter nikel beroperasi"

. lab var tam "jumlah tambang nikel beroperasi"

. 
end of do-file

. do "C:\Users\siddi\AppData\Local\Temp\STD2e28_000000.tmp"

. 
. /*save data set*/
. 
. keeporder kabu idkab tahun lnpdrbcap lnexpcap didsmel smel tam lngovexp lnagri nondsmel smelpretend

. bro

. 
. save "$dta/setsmelter.dta", replace //data DiD clear
file C:\Users\siddi\Documents\Tesis\statatodo\2_dta/setsmelter.dta saved

. 
. *done*
. cap log close
